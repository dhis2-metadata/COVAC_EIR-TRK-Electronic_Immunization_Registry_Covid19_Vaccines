# Release Note

A new version of the COVID-19 Vaccine EIR package has been released with configuration fixes and improvements. A detailed changelog of all metadata changes is included in [insert package repository link from GH].  

## New Features

New **tracker data elements** were added to conform to the WHO's [Digital Documentation of COVID-19 Certificates: Vaccination Status (2021)](https://www.who.int/publications/i/item/WHO-2019-nCoV-Digital_certificates-vaccination-data_dictionary-2021.1) core data dictionary:

* Created DE “Vaccine Brand”
* Created DE “Health Worker Identifier”

New **dashboard** [COVAC - Daily Monitoring, `YYtAbckt77l`] added to optimize performance for real-time vaccine delivery monitoring. The new dashboard is mapped to aggregate domain indicators and data elements for aggregating tracker data.

New **aggregate dataset** [COVAC - EIR aggregated tracker data, `tM6PFnTKKGP`] and **aggregate data elements** for storing program indicator values for aggregated tracker data. The new dataset and data elements are intended to feed the Daily Monitoring Dashboard.

**Program indicators** were modified to include a mapping (based on program indicator attributes) to target aggregate domain data elements and category option combinations to populate the aggregate dataset & dashboard.

## Improvements

Removed previous **dashboard** [COVID-19 Vaccine Registry, `YYtAbckt77l`] and associated analytics objects to prevent performance issues associated with users loading dashboards based on Program Indicators that calculate on the fly with heavy queries.

**Tracked entity attributes** configured to be uniquely generated by system were modified to improve tracker performance at large-scale. The use of RANDOM pattern generation for unique system id was discarded in favor of a more performant SEQUENTIAL pattern.

* Removed TEA ['Unique system identifier (EPI), `KSr2yTdu1AI`], with pattern "EPI" + RANDOM(########)
* Created TEA ['Unique system identifier (Vaccination), `iJ2HySGRDTh`] using pattern "EPI" + SEQUENTIAL(########)

**Program indicator** expression for [Number of people receiving a second, third or booster dose] and all disaggregations of this program indicator were modified with an added parentheses as follows to allow for a more accurate count of second dose patients.

```
(#{a1jCssI2LkW.LUIsbsm3okG} == 'DOSE2' || #{a1jCssI2LkW.LUIsbsm3okG} == 'DOSE3' || #{a1jCssI2LkW.LUIsbsm3okG} == 'BOOSTER') && **(**#{a1jCssI2LkW.bbnyNYD1wgS} == 'ASTRAZENECA' || #{a1jCssI2LkW.bbnyNYD1wgS} == 'BIONTECHPFIZER' || #{a1jCssI2LkW.bbnyNYD1wgS} == 'MODERNA' || #{a1jCssI2LkW.bbnyNYD1wgS} == 'GAMALEYA' || #{a1jCssI2LkW.bbnyNYD1wgS} == 'SINOPHARM'**)** && V{program_stage_id} == 'a1jCssI2LkW'
```

**Program rules** were modified to improve the tracker workflow:

| Program Rule                                                 | Change                                                       |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| Last dose - complete program & hide "Date for next dose"     | Changed the Priority to “20” so that the PR is solved after the PR which assigns the last dose check </br> Removed prompt to complete the program |
| If this is the second dose, mark it as "last dose" for all vaccine products | Change priority to 10 so that the PR is solved before the PR which hides the next dose date </br> Program rule action modified so that the value is also assigned to the variable “Last_dose” |
| Assign a suggested date for next dose XXXX (replace XXXX for vaccine product) | Priority changed to “30” so that PR is solved after the previous two PRs |
| Assign name to XXXX                                          | Modified to 'Assign Brand and manufacturer to XXX' </br> Program Rule Action modified to assign the manufacturer and brand based on the vaccine name instead of the other way around. |
| Assign name/Hide options to AstraZeneca/ astrazeneca         | Name modified to 'Assign Brand/Hide manufacturer options to AstraZeneca/ astrazeneca' |

**Code fields** for metadata objects were modified to conform with updated configuration standards for DHIS2 metadata packages. For example, many codes have been updated to use capital letters (Astrazeneca=ASTRAZENECA, Yes=YES, etc).
